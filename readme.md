# 舵机开门

## 想法来源

有一天在哔哩哔哩上面看到了有人用Arduino和舵机控制开门，就感觉很新奇，就想着自己也来试一试看看能不能成。

## 项目介绍

### 硬件

#### 硬件介绍

希望能够使用手机远程舵机控制开门，并有语音提示，如果可以使用红外遥控器也行。因为有电源，所以无需考虑耗电问题。

#### 舵机

##### 舵机接线方法

红-------------------------VCC
棕色----------------------GND
橙色----------------------信号线

![](photo\舵机接线颜色示意图.png)

##### 控制舵机

采用PWM控制的方式来进行舵机的操纵，舵机的控制需要MCU产生一个20ms的脉冲信号，以0.5ms到2.5ms的高电平来控制舵机的角度。对于180°舵机的控制数据如下：

- 0.5ms-------------0度； 2.5% 对应函数中占空比为250μs
- 1.0ms------------45度； 5.0% 对应函数中占空比为500μs
- 1.5ms------------90度； 7.5% 对应函数中占空比为750μs
- 2.0ms-----------135度； 10.0% 对应函数中占空比为1000μs
- 2.5ms-----------180度； 12.5% 对应函数中占空比为1250μs

以C51单片机控制舵机为例，利用定时中断定时500μs，每触发40次中断为一个PWM的周期（20ms），在中断程序里控制引脚的输出时间，达到模拟PWM的效果控制舵机。

#### 元器件清单

- 蓝牙模块
- 红外接收模块
- STC89C52RC
- 蜂鸣器
- ~~热敏电阻~~
- ~~光敏电阻~~

### 软件

#### 软件介绍

希望能够通过手机的蓝牙远程控制单片机进行开门。

软件使用GitHub用户Shanyaliux的SerialPortSample开源项目中的kotlindemo应用，并自己进行修改以适应自己使用。

#### 软件使用

1. 连接蓝牙设备
2. 选择蓝牙
4. 点击开门

## 说明

本来想弄一些新增的模块，想着可以直接从之前的文件copy，但是发现单片机不是同一个，copy以后就报错，而我又不懂，也就只有放弃新增加模块。热敏电阻和光敏电阻都不会，还是删了吧。

想自己通过Maui写一个安卓程序来实习手机蓝牙控制，但是能力不足，还是使用Android Studio借鉴别人的代码自己修改一个适合自己使用的安卓应用。

## 总结

之前在淘宝上买的，什么都是别人做好的，就很简单。现在自己弄，才发现想法都很好，要实现起来就有难度，就只好删了很多功能。

在别人的基础上进行安卓应用开发，确实方便了很多，可以直接使用不用接触蓝牙相关的代码，而且从中还学到了很多相关的知识。自己同时也在微信读书上看《第一行代码（第三版）》的内容，对安卓开发也有了一些了解，但是很多东西都记不住。

## **感谢以下开源项目**

- [SerialPortSample](https://github.com/Shanyaliux/SerialPortSample)

- [AppUpdate](https://github.com/azhon/AppUpdate)

